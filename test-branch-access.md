# اختبار نظام التحكم في الوصول حسب الفرع

## التحديثات المطبقة:

### 1. تحديث نموذج العميل (Customer Interface)
- إضافة حقلي `branchId` و `branchName` لربط العملاء بالفروع

### 2. تحديث صفحة إضافة عميل جديد
- إضافة حقل اختيار الفرع
- تطبيق قواعد التحقق: المستخدمون المرتبطون بفرع معين يجب أن يحددوا فرعاً
- تعيين الفرع تلقائياً للمستخدمين المرتبطين بفرع معين

### 3. تحديث عرض العملاء
- تطبيق فلترة حسب الفرع في `CustomerListClientWrapper`
- المستخدمون بدون صلاحية `view_all_branches` يرون فقط عملاء فرعهم
- إضافة عرض معلومات الفرع في بطاقة العميل والجدول

### 4. تحديث صفحة إنشاء طلب جديد
- تطبيق فلترة العملاء حسب الفرع عند جلب قائمة العملاء المتاحة

### 5. تحديث عرض تفاصيل الطلب
- إضافة عرض فرع العميل في تفاصيل الطلب

### 6. إضافة بيانات تجريبية
- إضافة فرع ثاني "فرع الشمال"
- إضافة عملاء تجريبيين مرتبطين بفروع مختلفة
- إضافة مستخدمين مرتبطين بفروع معينة للاختبار

## حسابات الاختبار:

### 1. المدير العام (يرى جميع البيانات)
- اسم المستخدم: `admin`
- كلمة المرور: `admin123`
- الصلاحيات: جميع الصلاحيات بما في ذلك `view_all_branches`

### 2. مدير الفرع الرئيسي (يرى فقط بيانات الفرع الرئيسي)
- اسم المستخدم: `branch_manager`
- كلمة المرور: `branch123`
- الفرع: الفرع الرئيسي (B001)
- يجب أن يرى فقط العملاء المرتبطين بالفرع الرئيسي

### 3. مدير فرع الشمال (يرى فقط بيانات فرع الشمال)
- اسم المستخدم: `north_manager`
- كلمة المرور: `north123`
- الفرع: فرع الشمال (B002)
- يجب أن يرى فقط العملاء المرتبطين بفرع الشمال

## العملاء التجريبيون:

### 1. أحمد محمد علي (الفرع الرئيسي)
- الهاتف: 0501234567
- الفرع: الفرع الرئيسي

### 2. فاطمة أحمد السالم (فرع الشمال)
- الهاتف: 0507654321
- الفرع: فرع الشمال

### 3. محمد عبدالله الخالد (الفرع الرئيسي)
- الهاتف: 0551234567
- الفرع: الفرع الرئيسي

## خطوات الاختبار:

### 1. اختبار المدير العام
1. تسجيل الدخول بحساب `admin`
2. الذهاب إلى صفحة العملاء
3. التأكد من رؤية جميع العملاء (3 عملاء)
4. إضافة عميل جديد والتأكد من إمكانية اختيار أي فرع

### 2. اختبار مدير الفرع الرئيسي
1. تسجيل الدخول بحساب `branch_manager`
2. الذهاب إلى صفحة العملاء
3. التأكد من رؤية عميلين فقط (أحمد ومحمد)
4. إضافة عميل جديد والتأكد من تعيين الفرع الرئيسي تلقائياً

### 3. اختبار مدير فرع الشمال
1. تسجيل الدخول بحساب `north_manager`
2. الذهاب إلى صفحة العملاء
3. التأكد من رؤية عميل واحد فقط (فاطمة)
4. إضافة عميل جديد والتأكد من تعيين فرع الشمال تلقائياً

### 4. اختبار إنشاء الطلبات
1. تسجيل الدخول بحساب مدير فرع
2. إنشاء طلب جديد
3. التأكد من ظهور العملاء المرتبطين بالفرع فقط في قائمة العملاء

## النتائج المتوقعة:
- كل مستخدم يرى ويدير فقط العملاء المرتبطين بفرعه
- المدير العام يرى جميع العملاء
- عند إضافة عميل جديد، يتم ربطه بفرع المستخدم تلقائياً
- في الطلبات، تظهر فقط العملاء المرتبطين بفرع المستخدم
